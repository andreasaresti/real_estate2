<link rel="stylesheet" href="/theme/sabbiancowebsite/assets/css/frontend.min.css">
<link rel="stylesheet" href="/theme/sabbiancowebsite/assets/css/post-6.css">
<link rel="stylesheet" href="/theme/sabbiancowebsite/assets/css/post-105.css">
<link rel="stylesheet" href="/theme/sabbiancowebsite/assets/css/elementor-styles.min.css">
<div data-elementor-type="wp-post" data-elementor-id="105" class="elementor elementor-105" style="margin-top: 50px;">
    <section class="elementor-section elementor-top-section elementor-element elementor-element-da599bc elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="da599bc" data-element_type="section">
        <div class="elementor-container elementor-column-gap-no">
            <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-af6d67c" data-id="af6d67c" data-element_type="column">
                <div class="elementor-widget-wrap elementor-element-populated">
                    <div class="elementor-element elementor-element-23d984c elementor-widget elementor-widget-ere-section-title-widget" data-id="23d984c" data-element_type="widget" data-widget_type="ere-section-title-widget.default">
                        <div class="elementor-widget-container">
                            <div class="rh_elementor_widget re_section_head_elementor">
                                <span class="rh_section__subtitle">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;"></font>
                                    </font>
                                </span>
                                <h2 class="rh_section__title">
                                    <font style="vertical-align: inherit;font-size: 20px;">
                                        <font style="vertical-align: inherit;">Agencies</font>
                                    </font>
                                </h2>
                                <p class="rh_section__desc">
                                    <font style="vertical-align: inherit;">
                                        <font style="vertical-align: inherit;"></font>
                                    </font>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section class="elementor-section elementor-top-section elementor-element elementor-element-af81f96 elementor-section-boxed elementor-section-height-default elementor-section-height-default" data-id="af81f96" data-element_type="section" data-settings="{&quot;background_background&quot;:&quot;classic&quot;}">
    <div class="elementor-container elementor-column-gap-no">
        <div class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-2ff1bd0" data-id="2ff1bd0" data-element_type="column">
            <div class="elementor-widget-wrap elementor-element-populated">
                <div class="elementor-element elementor-element-a9662a4 elementor-widget elementor-widget-ere-news-widget-home" data-id="a9662a4" data-element_type="widget" data-widget_type="ere-news-widget-home.default">
                    <div class="elementor-widget-container">
                        <section id="rh-a9662a4" class="rhea_ele_property_ajax_target rhea_latest_properties_ajax rh_elementor_widget rh_wrapper__news_elementor">
                            <div class="home-properties-section-inner-target">
                                <div class="rh_properties_pagination_append rh_section__news_elementor" id="agencyContent">
                                    
                                </div>
                                <div class="rhea_svg_loader">
                                    <svg
                                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="32" height="32" fill="#dedede">
                                        <path transform="translate(2)" d="M0 12 V20 H4 V12z">
                                            <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0" keyTimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"></animate>
                                        </path>
                                        <path transform="translate(8)" d="M0 12 V20 H4 V12z">
                                            <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.2" keyTimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"></animate>
                                        </path>
                                        <path transform="translate(14)" d="M0 12 V20 H4 V12z">
                                            <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.4" keyTimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"></animate>
                                        </path>
                                        <path transform="translate(20)" d="M0 12 V20 H4 V12z">
                                            <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.6" keyTimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"></animate>
                                        </path>
                                        <path transform="translate(26)" d="M0 12 V20 H4 V12z">
                                            <animate attributeName="d" values="M0 12 V20 H4 V12z; M0 4 V28 H4 V4z; M0 12 V20 H4 V12z; M0 12 V20 H4 V12z" dur="1.2s" repeatCount="indefinite" begin="0.8" keyTimes="0;.2;.5;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.8 0.4 0.8" calcMode="spline"></animate>
                                        </path>
                                    </svg>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </section>
    <input type="hidden" id="agency_page_index" value="1">
</div>
<script type="text/javascript">
    var countriesHomeAgency = [];
	// window.addEventListener("load", (event) => {
        loadCountryHomeAgency();
	// });
    function loadCountryHomeAgency(){
        const url = "/api/get-countries";
		let xhr = new XMLHttpRequest();
		xhr.open('POST', url, true);
		xhr.setRequestHeader('Content-type', 'application/json');
		xhr.send();
		xhr.onload = function () {
			data = JSON.parse(xhr.response);
            list = data.data;
            for(i=0;i<list.length;i++){
                countriesHomeAgency.push({"code":list[i].code,"name":list[i].displayname});
            }
            loadAgenciesHomeAgency();
        }
    }
    function loadAgenciesHomeAgency(){
		const url = "/api/get-agencies";
		let xhr = new XMLHttpRequest();
		xhr.open('POST', url, true);
		xhr.setRequestHeader('Content-type', 'application/json');
		xhr.send();
		xhr.onload = function () {
			data = JSON.parse(xhr.response);
			list = data.data;
            console.log(list);
            var temp = "";
            temp = "";
            if(list.length >3){
                counter = 3;
            }else{
                counter = list.length;
            }
            for(i= 0; i<counter; i++)
            {
                temp +=`<article class="post-45803 post type-post status-publish format-standard has-post-thumbnail hentry category-market-trends tag-sabbianco tag-298 tag-299 rh_blog__post entry-header-margin-fix">
                            <div class="rh_news_module_inner">
                                <div class="rh-wrapper-post-media">
                                    <figure>
                                        <a href="" title="`+ list[i].name + `">
                                            <img width="680" height="430" alt="" decoding="async" class="attachment-modern-property-child-slider size-modern-property-child-slider wp-post-image ls-is-cached lazyloaded" src="`+list[i].image+`" data-xblocker="passed" style="visibility: visible;">
                                            <noscript>
                                                <img width="680" height="430" src="`+list[i].image+`" class="attachment-modern-property-child-slider size-modern-property-child-slider wp-post-image" alt="" decoding="async" />
                                            </noscript>
                                        </a>
                                    </figure>
                                </div>
                                <div class="rh-wrapper-post-contents_elementor">
                                    <h3 class="post-title">
                                        <a href="">
                                            <font style="vertical-align: inherit;">
                                                <font style="vertical-align: inherit;">`+ list[i].name + `</font>
                                            </font>
                                        </a>
                                    </h3>
                                    <p>
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">Emai: `+list[i].email +`</font>
                                        </font>
                                    </p>
                                    <p>
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">phone: `+list[i].phone +`</font>
                                        </font>
                                    </p>
                                    <p>
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">address: `+list[i].address +`</font>
                                        </font>
                                    </p>
                                    <p>
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">city: `+list[i].city +`</font>
                                        </font>
                                    </p>
                                    <p>
                                        <font style="vertical-align: inherit;">
                                            <font style="vertical-align: inherit;">Country: `+getCountryAgency(list[i].country) +`</font>
                                        </font>
                                    </p>
                                </div>
                            </div>
                        </article>`;
            }
            document.getElementById("agencyContent").innerHTML = temp;
		}
	}
    function loadPageHomeAgency(index){
        document.getElementById("agency_page_index").value = index;
		loadAgenciesHomeAgency();
	}
    function getCountryAgency(code){
        for(i=0;i<countriesHomeAgency.length;i++){
            if(countriesHomeAgency[i].code == code){
                return countriesHomeAgency[i].name;
            }
        }
    }
</script>